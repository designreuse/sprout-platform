<div fxLayout="column" fxLayoutGap="1em">
	<mat-card>
		<mat-list>
			<mat-list-item *ngFor="let menu of this.menus | async; trackBy: trackById">
				<ng-container *ngTemplateOutlet="menuItemTemplate;context:{item: menu}"></ng-container>
			</mat-list-item>
			<mat-list-item>
				<button mat-raised-button color="accent" (click)="addItem()">Add item <mat-icon>add</mat-icon></button>
			</mat-list-item>
		</mat-list>
	</mat-card>
</div>

<ng-template #menuItemTemplate let-item="item">
	<div fxLayout fxLayoutAlign="start center">
		<button mat-button (click)="deleteItem(item)"><mat-icon>delete</mat-icon></button>
		<mat-icon>{{item.icon}}</mat-icon>
		{{item.displayText}}
	</div>
	<mat-list *ngIf=" item.items && item.items.length > 0">
		<ng-container *ngTemplateOutlet="menuListTemplate;context:{itemList:item.items}"></ng-container>
	</mat-list>
</ng-template>

<ng-template #menuListTemplate let-itemList="itemList">
	<mat-list-item *ngFor="let item of itemList; trackBy: trackById">
		<span>second</span>
		<ng-container *ngTemplateOutlet="menuItemTemplate;context:{item: item}"></ng-container>
	</mat-list-item>
</ng-template>
